{
	"info": {
		"_postman_id": "b5988e1d-2ef1-4249-9637-4a101c3bfb50",
		"name": "CPA demo",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Register",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"client_name\":\"hbbTV\",\n\t\"software_id\":\"hbbTVPlayApp\",\n\t\"software_version\":\"1.0.0\"\n}"
				},
				"url": {
					"raw": "https://id.rts.ch/register",
					"protocol": "https",
					"host": [
						"id",
						"rts",
						"ch"
					],
					"path": [
						"register"
					]
				},
				"description": "Register a client (a device, not a user nor an app) to get a client_id and client_secret"
			},
			"response": []
		},
		{
			"name": "Associate",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"client_id\":\"6\",\"client_secret\":\"XXXXXX\",\"domain\":\"*.rts.ch\"}"
				},
				"url": {
					"raw": "https://id.rts.ch/associate",
					"protocol": "https",
					"host": [
						"id",
						"rts",
						"ch"
					],
					"path": [
						"associate"
					]
				},
				"description": "Initiate the association process to link device to a user.\nYou get a `user_code` that the user will enter at the provided `verification_uri`.\nThe `device_code` will be used by the client to poll the /token endpoint regularly, as specified by `interval`."
			},
			"response": []
		},
		{
			"name": "validate user Code",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Cookie",
						"value": "identity.provider.sid=XXXXXX"
					},
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "verification_type=user_code&user_code=XXXXXX"
				},
				"url": {
					"raw": "https://id.rts.ch/verify",
					"protocol": "https",
					"host": [
						"id",
						"rts",
						"ch"
					],
					"path": [
						"verify"
					]
				},
				"description": "Mimics the user visiting the `verification_uri` and posting the `user_code` through the form."
			},
			"response": []
		},
		{
			"name": "get token",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"client_id\":\"6\",\n\t\"client_secret\":\"XXXXXX\",\n\t\"domain\":\"*.rts.ch\",\n\t\"device_code\":\"XXXXXX\",\n\t\"grant_type\":\"http://tech.ebu.ch/cpa/1.0/device_code\"\n}"
				},
				"url": {
					"raw": "https://id.rts.ch/token",
					"protocol": "https",
					"host": [
						"id",
						"rts",
						"ch"
					],
					"path": [
						"token"
					]
				}
			},
			"response": []
		}
	]
}